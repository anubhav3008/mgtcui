!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueAutosuggest=t():e.VueAutosuggest=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){e.exports=function(e,t,n,i,s,u){var r,o=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(r=e,o=e.default);var c="function"==typeof o?o.options:o;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId=s);var l;if(u?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(u)},c._ssrRegister=l):i&&(l=i),l){var d=c.functional,p=d?c.render:c.beforeCreate;d?(c._injectStyles=l,c.render=function(e,t){return l.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,l):[l]}return{esModule:r,exports:o,options:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),s=n.n(i),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{attrs:{role:"listbox","aria-labelledby":"autosuggest"}},[e.section.label?n("li",{class:e.className},[e._v(e._s(e.section.label))]):e._e(),e._v(" "),e._l(e.list,function(t,i){return n("li",{key:e.getItemIndex(i),class:{"autosuggest__results_item-highlighted":e.getItemIndex(i)==e.currentIndex,autosuggest__results_item:!0},attrs:{role:"option","data-suggestion-index":e.getItemIndex(i),"data-section-name":e.section.name,id:"autosuggest__results_item-"+e.getItemIndex(i)},domProps:{innerHTML:e._s(e.styleItem(t))},on:{mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}})})],2)},r=[],o={render:u,staticRenderFns:r},a=o,c=n(0),l=c(s.a,a,!1,null,null,null);t.default=l.exports},function(e,t,n){var i,s,u;!function(r,o){s=[t,n(3),n(1)],i=o,void 0!==(u="function"==typeof i?i.apply(t,s):i)&&(e.exports=u)}(0,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultSection=e.VueAutosuggest=void 0;var s=i(t),u=i(n),r={install:function(e){e.component("vue-autosuggest-default-section",u.default),e.component("vue-autosuggest",s.default)}};e.default=r,e.VueAutosuggest=r,e.DefaultSection=u.default,"undefined"!=typeof window&&window.Vue&&window.Vue.use(r)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n.n(i),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"autosuggest"}},[n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"form-control",class:[e.isOpen?"autosuggest__input-open":"",e.inputProps.class],attrs:{name:"q",type:"text",autocomplete:"off","aria-autosuggest":"list","aria-owns":"autosuggest__results","aria-activedescendant":e.isOpen&&null!==e.currentIndex?"autosuggest__results--item-"+e.currentIndex:"","aria-haspopup":e.isOpen?"true":"false"},domProps:{value:e.searchInput},on:{keydown:e.handleKeyStroke,click:e.onClick,input:function(t){t.target.composing||(e.searchInput=t.target.value)}}},"input",e.inputProps,!1)),e._v(" "),n("div",{staticClass:"autosuggest__results-container"},[e.getSize()>0&&!e.loading?n("div",{staticClass:"autosuggest__results",attrs:{role:"listbox","aria-labelledby":"autosuggest"}},e._l(this.computedSections,function(t,i){return n(t.type,{key:e.getSectionRef(i),ref:e.getSectionRef(i),refInFor:!0,tag:"component",attrs:{section:t,updateCurrentIndex:e.updateCurrentIndex,searchInput:e.searchInput}})})):e._e()])])},r=[],o={render:u,staticRenderFns:r},a=o,c=n(0),l=c(s.a,a,!1,null,null,null);t.default=l.exports},function(e,t,n){var i,s,u;!function(r,o){s=[t,n(1)],i=o,void 0!==(u="function"==typeof i?i.apply(t,s):i)&&(e.exports=u)}(0,function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(t);e.default={name:"autosuggest",components:{DefaultSection:n.default},props:{inputProps:{id:{type:String,default:"autosuggest__input"},onInputChange:{type:Function,required:!0},initialValue:{type:String,default:""},onClick:{type:Function,required:!1}},limit:{type:Number,required:!1,default:1/0},suggestions:{type:Array,required:!0,default:[]},shouldRenderSuggestions:{type:Function,required:!1,default:function(){return!0}},sectionConfigs:{type:Object,required:!1,default:function(){return{default:{onSelected:null}}}},onSelected:{type:Function,required:!1,default:null}},data:function(){return{searchInput:"",searchInputOriginal:null,currentIndex:null,currentItem:null,loading:!1,didSelectFromOptions:!1,computedSections:[],computedSize:0}},computed:{isOpen:function(){return this.getSize()>0&&this.shouldRenderSuggestions()&&!this.loading}},created:function(){this.inputProps.onClick||(this.inputProps.onClick=this._onClick)},methods:{_onClick:function(){return this},_onSelected:function(){this.currentItem&&this.sectionConfigs[this.currentItem.name]&&this.sectionConfigs[this.currentItem.name].onSelected?this.sectionConfigs[this.currentItem.name].onSelected(this.currentItem,this.searchInputOriginal):this.sectionConfigs.default.onSelected?this.sectionConfigs.default.onSelected(null,this.searchInputOriginal):this.onSelected&&this.onSelected(this.currentItem)},getSectionRef:function(e){return"computed_section_"+e},getSize:function(){return this.computedSize},getItemByIndex:function(e){var t=!1;if(null===e)return t;for(var n=0;n<this.computedSections.length;n++)if(e>=this.computedSections[n].start_index&&e<=this.computedSections[n].end_index){var i=e-this.computedSections[n].start_index,s=this.$refs["computed_section_"+n][0];if(s){t={name:this.computedSections[n].name,type:this.computedSections[n].type,label:s.getLabelByIndex(i),item:s.getItemByIndex(i)};break}}return t},handleKeyStroke:function(e){var t=this,n=e.keyCode;if(!([16,9,18,91,93].indexOf(n)>-1))switch(this.loading=!1,this.didSelectFromOptions=!1,n){case 40:case 38:if(e.preventDefault(),this.isOpen){if(38===n&&null===this.currentIndex)break;var i=40===n?1:-1,s=this.currentIndex+i;this.setCurrentIndex(s,this.getSize(),i),this.didSelectFromOptions=!0,this.getSize()>0&&this.currentIndex>=0?(this.setChangeItem(this.getItemByIndex(this.currentIndex)),this.didSelectFromOptions=!0):-1==this.currentIndex&&(this.currentIndex=null,this.searchInput=this.searchInputOriginal,e.preventDefault())}break;case 13:if(e.preventDefault(),229===n)break;this.$nextTick(function(){t.getSize()>0&&t.currentIndex>=0&&(t.setChangeItem(t.getItemByIndex(t.currentIndex),!0),t.didSelectFromOptions=!0),t.loading=!0,t.$nextTick(function(){t._onSelected(t.didSelectFromOptions)})});break;case 27:this.isOpen&&(this.loading=!0,this.currentIndex=null,this.searchInput=this.searchInputOriginal,e.preventDefault())}},setChangeItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===this.currentIndex?this.currentItem=null:e&&(this.searchInput=e.label,this.currentItem=e,t&&(this.searchInputOriginal=e.label))},updateCurrentIndex:function(e){this.currentIndex=e},onDocumentMouseUp:function(){var e=this;if(null===this.currentIndex||!this.isOpen)return void(this.loading=this.shouldRenderSuggestions());this.loading=!0,this.didSelectFromOptions=!0,this.setChangeItem(this.getItemByIndex(this.currentIndex),!0),this.$nextTick(function(){e._onSelected(!0)})},setCurrentIndex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments[2],i=e;null===this.currentIndex&&(i=0),this.currentIndex<0&&1===n&&(i=0),e>=t&&(i=0),this.currentIndex=i;var s=document.getElementById("autosuggest__results_item-"+this.currentIndex),u="autosuggest__results_item-highlighted";document.querySelector("."+u)&&this.removeClass(document.querySelector("."+u),u),s&&this.addClass(s,u)},onClick:function(){this.loading=!1,this.inputProps.onClick()},hasClass:function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.classList&&e.classList.remove(t)},getSectionName:function(e){return e.name||(e.name="default"),e.name}},mounted:function(){document.addEventListener("mouseup",this.onDocumentMouseUp),this.searchInput=this.inputProps.initialValue,this.loading=!0},watch:{searchInput:function(e){this.value=e,this.didSelectFromOptions||(this.searchInputOriginal=this.value,this.currentIndex=null,this.inputProps.onInputChange(e))},suggestions:{immediate:!0,handler:function(){var e=this;this.computedSections=[],this.computedSize=0,this.suggestions.forEach(function(t){if(t.data){var n=e.getSectionName(t),i=e.sectionConfigs[n],s=i.type,u=i.limit,r=i.label;s=s||"default-section",u=u||1/0,u=t.data.length<u?t.data.length:u,r=r||t.label;var o={name:n,label:r,type:s,limit:u,data:t.data,start_index:e.computedSize,end_index:e.computedSize+u-1};e.computedSections.push(o),e.computedSize+=u}},this)}}}}})},function(e,t,n){var i,s,u;!function(n,r){s=[t],i=r,void 0!==(u="function"==typeof i?i.apply(t,s):i)&&(e.exports=u)}(0,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"default-section",props:{section:{type:Object,required:!0},currentIndex:{type:Number,required:!1,default:1/0},updateCurrentIndex:{type:Function,required:!0},searchInput:{type:String,required:!1,default:""}},computed:{list:function(){var e=this.section.limit;return this.section.data.length<e&&(e=this.section.data.length),this.section.data.slice(0,e)},className:function(){return"autosuggest__results_title autosuggest__results_title_"+this.section.name}},methods:{styleItem:function(e){if(this.searchInput&&"string"==typeof e&&this.searchInput!==e){var t=this.searchInput.trim(),n=new RegExp(""+t,"ig");return e.replace(n,"<b>"+t+"</b>")}return e},getItemIndex:function(e){return this.section.start_index+e},getItemByIndex:function(e){return this.section.data[e]},getLabelByIndex:function(e){return this.section.data[e]},onMouseEnter:function(e){this.updateCurrentIndex(e.currentTarget.getAttribute("data-suggestion-index"))},onMouseLeave:function(){this.updateCurrentIndex(null)}}}})}])});